<!DOCTYPE html>
<html lang="en">
  <head>
    <title>GatheredKit  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a title="GatheredKit  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">GatheredKit Docs</a> (69% documented)</p>
        <p class="header-right"><a href="https://github.com/josephduffy/GatheredKit"><img src="img/gh.png"/>View on GitHub</a></p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">GatheredKit Reference</a>
        <img id="carat" src="img/carat.png" />
        GatheredKit  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/Accelerometer.html">Accelerometer</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/BaseSource.html">BaseSource</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DeviceAttitude.html">DeviceAttitude</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Gyroscope.html">Gyroscope</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Magnetometer.html">Magnetometer</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Screen.html">Screen</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/SourceAvailability.html">SourceAvailability</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/UnitError.html">UnitError</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Extensions/Array.html">Array</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/CustomisableUpdateIntervalSource.html">CustomisableUpdateIntervalSource</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/ManuallyUpdatableSource.html">ManuallyUpdatableSource</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/NumericUnit.html">NumericUnit</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/Source.html">Source</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/Unit.html">Unit</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/Value.html">Value</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/ValuesProvider.html">ValuesProvider</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/AccelerationValue.html">AccelerationValue</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/AnyUnit.html">AnyUnit</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/BeatsPerMinute.html">BeatsPerMinute</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Boolean.html">Boolean</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Byte.html">Byte</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CalibratedMagneticFieldValue.html">CalibratedMagneticFieldValue</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Decibel.html">Decibel</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Degree.html">Degree</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/GenericValue.html">GenericValue</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Kilopascal.html">Kilopascal</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MagneticFieldValue.html">MagneticFieldValue</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Meter.html">Meter</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Microtesla.html">Microtesla</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/None.html">None</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/NumericNone.html">NumericNone</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Percent.html">Percent</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Pixel.html">Pixel</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Point.html">Point</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/QuaternionValue.html">QuaternionValue</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/RotationMatrixValue.html">RotationMatrixValue</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/RotationRateValue.html">RotationRateValue</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Scale.html">Scale</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Typealiases.html">Type Aliases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:11GatheredKit8AnyValuea">AnyValue</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <h1 id='api' class='heading'>API</h1>

<p>GatheredKit aims to abstract away the specifics of the various iOS frameworks used to create the sources by wrapping them in an intuitive and consistent API.</p>
<h2 id='code-source-code' class='heading'><code><a href="Protocols/Source.html">Source</a></code></h2>

<p>The core of GatheredKit is the <code><a href="Protocols/Source.html">Source</a></code> protocol.</p>
<pre class="highlight swift"><code><span class="cm">/**
 An object that can provide data from a specific source on the device
 */</span>
<span class="kd">public</span> <span class="kd">protocol</span> <span class="kt">Source</span> <span class="p">:</span> <span class="kt">AnyObject</span><span class="p">,</span> <span class="kt">ValuesProvider</span> <span class="p">{</span>

    <span class="c1">/// A closure that will be called with the latest values</span>
    <span class="kd">public</span> <span class="kd">typealias</span> <span class="kt">UpdateListener</span> <span class="o">=</span> <span class="p">(</span><span class="n">_</span> <span class="nv">latestValues</span><span class="p">:</span> <span class="p">[</span><span class="kt">AnyValue</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kt">Void</span>

    <span class="c1">/// The availability of the source</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="k">var</span> <span class="nv">availability</span><span class="p">:</span> <span class="kt">SourceAvailability</span> <span class="p">{</span> <span class="k">get</span> <span class="p">}</span>

    <span class="c1">/// A boolean indicating if the source is currently performing automatic updates</span>
    <span class="kd">public</span> <span class="k">var</span> <span class="nv">isUpdating</span><span class="p">:</span> <span class="kt">Bool</span> <span class="p">{</span> <span class="k">get</span> <span class="p">}</span>

    <span class="c1">/// Creates a new instance of the source</span>
    <span class="kd">public</span> <span class="nf">init</span><span class="p">()</span>

    <span class="cm">/**
     Adds a closure to the array of closures that will be called when any of the source's
     values are updated. The closure will be called with all values, but not all the values
     will neccessary be new.
     The returned object must be retained; the lifecycle of the listener is tied to the object. If
     the object is deallocated the listener will be destroyed.
     - parameter updateListener: The closure to call with updated values
     - returns: An opaque object. The lifecycle of the listener is tied to the object
     */</span>
    <span class="kd">public</span> <span class="kd">func</span> <span class="nf">addUpdateListener</span><span class="p">(</span><span class="n">_</span> <span class="nv">updateListener</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="kt">UpdateListener</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">AnyObject</span>

    <span class="cm">/**
     Starts automatic updates. Closures added via `addUpdateListener(_:)` will be
     called when new values are available
     */</span>
    <span class="kd">public</span> <span class="kd">func</span> <span class="nf">startUpdating</span><span class="p">()</span>

    <span class="cm">/**
     Stops automatic updates
     */</span>
    <span class="kd">public</span> <span class="kd">func</span> <span class="nf">stopUpdating</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">public</span> <span class="kd">extension</span> <span class="kt">Source</span> <span class="p">{</span>

    <span class="cm">/**
     Starts automatic updates and adds a closure to the array of closures that will be called when
     any of the source's values are updated. The closure will be called with all values, but
     not all the values will neccessary be new.
     The returned object must be retained; the lifecycle of the listener is tied to the object. If
     the object is deallocated the listener will be destroyed.
     - parameter updateListener: The closure to call with updated values
     - returns: An opaque object. The lifecycle of the listener is tied to the object
     */</span>
    <span class="kd">public</span> <span class="kd">func</span> <span class="nf">startUpdating</span><span class="p">(</span><span class="n">sendingUpdatesTo</span> <span class="nv">updateListener</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="kt">UpdateListener</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">AnyObject</span>
<span class="p">}</span>


<span class="cm">/**
 An object that provides values
 */</span>
<span class="kd">public</span> <span class="kd">protocol</span> <span class="kt">ValuesProvider</span> <span class="p">{</span>

    <span class="c1">/// An array of all the values provided by this object</span>
    <span class="k">var</span> <span class="nv">allValues</span><span class="p">:</span> <span class="p">[</span><span class="kt">AnyValue</span><span class="p">]</span> <span class="p">{</span> <span class="k">get</span> <span class="p">}</span>

<span class="p">}</span>
</code></pre>

<p>Implementations also have individual properties for each of their values, such as the <code>brightness</code> property of the <code><a href="Classes/Screen.html">Screen</a></code> source.</p>
<h2 id='code-customisableupdateintervalsource-code' class='heading'><code><a href="Protocols/CustomisableUpdateIntervalSource.html">CustomisableUpdateIntervalSource</a></code></h2>

<p>A <code><a href="Protocols/CustomisableUpdateIntervalSource.html">CustomisableUpdateIntervalSource</a></code> is a <code><a href="Protocols/Source.html">Source</a></code> that supports customising the update frequency, e.g. the gyroscope</p>
<pre class="highlight swift"><code><span class="cm">/**
 A source that supports updating its properties at a given time interval
 */</span>
<span class="kd">public</span> <span class="kd">protocol</span> <span class="kt">CustomisableUpdateIntervalSource</span> <span class="p">:</span> <span class="kt">Source</span> <span class="p">{</span>

    <span class="c1">/// The default update interval that will be used when calling `startUpdating()`</span>
    <span class="c1">/// without specifying the update interval.</span>
    <span class="c1">/// This value is unique per-source and does not persist between app runs</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="k">var</span> <span class="nv">defaultUpdateInterval</span><span class="p">:</span> <span class="kt">TimeInterval</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span>

    <span class="c1">/// The time interval between property updates. A value of `nil` indicates that</span>
    <span class="c1">/// the source is not performing periodic updates</span>
    <span class="kd">public</span> <span class="k">var</span> <span class="nv">updateInterval</span><span class="p">:</span> <span class="kt">TimeInterval</span><span class="p">?</span> <span class="p">{</span> <span class="k">get</span> <span class="p">}</span>

    <span class="cm">/**
     Start performing periodic updates, updating every `updateInterval` seconds

     - parameter updateInterval: The interval between updates, measured in seconds
    */</span>
    <span class="kd">public</span> <span class="kd">func</span> <span class="nf">startUpdating</span><span class="p">(</span><span class="n">every</span> <span class="nv">updateInterval</span><span class="p">:</span> <span class="kt">TimeInterval</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">public</span> <span class="kd">extension</span> <span class="kt">CustomisableUpdateIntervalSource</span> <span class="p">{</span>

    <span class="c1">/// A boolean indicating if the source is currently updating its properties every `updateInterval`</span>
    <span class="kd">public</span> <span class="k">var</span> <span class="nv">isUpdating</span><span class="p">:</span> <span class="kt">Bool</span> <span class="p">{</span> <span class="k">get</span> <span class="p">}</span>

    <span class="cm">/**
     Starts performing period updated. The value of the static variable `defaultUpdateInterval` will
     used for the update interval.
     */</span>
    <span class="kd">public</span> <span class="kd">func</span> <span class="nf">startUpdating</span><span class="p">()</span>

    <span class="cm">/**
     Start performing periodic updates, updating every `updateInterval` seconds.

     The passed closure will be added to the array of closures that will be called when any
     of the source's values are updated. The closure will be called with all values, but not
     all the values will neccessary be new.

     The returned object must be retained; the lifecycle of the listener is tied to the object. If
     the object is deallocated the listener will be destroyed.

     - parameter updateInterval: The interval between updates, measured in seconds
     - parameter updateListener: The closure to call with updated values
     - returns: An opaque object. The lifecycle of the listener is tied to the object
     */</span>
    <span class="kd">public</span> <span class="kd">func</span> <span class="nf">startUpdating</span><span class="p">(</span><span class="n">every</span> <span class="nv">updateInterval</span><span class="p">:</span> <span class="kt">TimeInterval</span><span class="p">,</span> <span class="n">sendingUpdatesTo</span> <span class="nv">updateListener</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="kt">UpdateListener</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">AnyObject</span>
<span class="p">}</span>

</code></pre>
<h2 id='code-manuallyupdatablesource-code' class='heading'><code><a href="Protocols/ManuallyUpdatableSource.html">ManuallyUpdatableSource</a></code></h2>

<p>A <code><a href="Protocols/ManuallyUpdatableSource.html">ManuallyUpdatableSource</a></code> is a <code><a href="Protocols/Source.html">Source</a></code> that does not provide automatic updates, but must be polled for updates. Timer-based updates are provided to keep the API concistent, but the values update listeners receive may not always contain new values.</p>
<pre class="highlight swift"><code><span class="cm">/**
 A source that supports its properties being updated at any given time
 */</span>
<span class="kd">public</span> <span class="kd">protocol</span> <span class="kt">ManuallyUpdatableSource</span><span class="p">:</span> <span class="kt">CustomisableUpdateIntervalSource</span> <span class="p">{</span>

    <span class="cm">/**
     Force the source to update its properties. Note that there is no guarantee that new data
     will be available

     - returns: The property values after the update
     */</span>
    <span class="kd">func</span> <span class="nf">updateProperties</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="kt">AnyValue</span><span class="p">]</span>

<span class="p">}</span>
</code></pre>
<h2 id='installation' class='heading'>Installation</h2>

<p>GatheredKit can be installed using any of the below methods. Once installed, simply <code>import GatheredKit</code> to start using it.</p>
<h3 id='carthage' class='heading'>Carthage</h3>

<p>To install via Carthage add to following to your <code>Cartfile</code>:</p>
<pre class="highlight plaintext"><code>github "JosephDuffy/GatheredKit"
</code></pre>

<p>Run <code>carthage update GatheredKit --platform iOS</code> to build the framework and then drag the built framework file in to your Xcode project. GatheredKit provides pre-compiled binaries, <a href="https://github.com/Carthage/Carthage#dwarfs-symbol-problem">which can cause some issues with symbols</a>. Use the <code>--no-use-binaries</code> flag if this is an issue.</p>

<p>Remember to <a href="https://github.com/Carthage/Carthage#if-youre-building-for-ios-tvos-or-watchos">add GatheredKit to your Carthage build phase</a>:</p>
<pre class="highlight plaintext"><code>$(SRCROOT)/Carthage/Build/iOS/GatheredKit.framework
</code></pre>

<p>and</p>
<pre class="highlight plaintext"><code>$(BUILT_PRODUCTS_DIR)/$(FRAMEWORKS_FOLDER_PATH)/GatheredKit.framework
</code></pre>
<h3 id='cocoapods' class='heading'>CocoaPods</h3>

<p>To install via <a href="https://cocoapods.org">CocoaPods</a> add the following line to your Podfile:</p>
<pre class="highlight ruby"><code><span class="n">pod</span> <span class="s1">'GatheredKit'</span>
</code></pre>

<p>and then run <code>pod install</code>.</p>
<h2 id='tests' class='heading'>Tests</h2>

<p>Running the tests for GatheredKit requires <code>Quick</code> and <code>Nimble</code>, which can be installed using Carthage:</p>

<p><code>carthage build --platform iOS --no-use-binaries</code></p>

<p>Tests can be run via Xcode or <code>fastlane test</code>.</p>
<h2 id='license' class='heading'>License</h2>

<p>The project is released under the MIT license. View the <a href="./LICENSE">LICENSE</a> file for the full license.</p>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2018 <a class="link" href="https://josephduffy.co.uk" target="_blank" rel="external">Joseph Duffy</a>. All rights reserved. (Last updated: 2018-06-16)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.9.3</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
